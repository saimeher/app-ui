<ion-header>
  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title *ngIf="!did">New Issue</ion-title>
    <ion-title *ngIf="did > 0 ">{{issue.issue_desc}}</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>
  <ion-list>
    <ion-item>
      <ion-label stacked>Domain</ion-label>
      <ion-select [(ngModel)]="issue.domain">
        <ion-option *ngFor="let domain of domains" value="{{domain.value}}">{{domain.title}}</ion-option>
      </ion-select>
    </ion-item>

    <ion-item>
      <ion-label stacked>Issue Description</ion-label>
      <ion-input [(ngModel)]="issue.issue_desc" type="text"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label stacked>Location / Serial Number</ion-label>
      <ion-input [(ngModel)]="issue.location" type="text"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label stacked>Impact / Problem</ion-label>
      <ion-input [(ngModel)]="issue.problem" type="text"></ion-input>
    </ion-item>

    <ion-item *ngIf="did > 0 && _sharedService.role === 'admin'">
      <ion-label stacked>Priority</ion-label>
      <ion-select [(ngModel)]="issue.priority">
        <ion-option value="high">High</ion-option>
        <ion-option value="medium">Medium</ion-option>
        <ion-option value="low">Low</ion-option>
      </ion-select>
    </ion-item>
    <ion-item *ngIf="did > 0 && _sharedService.role === 'admin'">
      <ion-label stacked>Repaired On</ion-label>
      <ion-datetime displayFormat="YYYY-MM-DD HH:mm" pickerFormat="MMMM DD, YYYY HH:mm" [(ngModel)]="issue.repaired_on"></ion-datetime>
    </ion-item>
    <ion-item *ngIf="did > 0 && _sharedService.role === 'admin'">
      <ion-label stacked>Repaired By</ion-label>
      <ion-input [(ngModel)]="issue.repaired_by" type="text"></ion-input>
    </ion-item>
    <ion-item *ngIf="did > 0 && _sharedService.role === 'admin'">
      <ion-label stacked>Date of Resolution</ion-label>
      <ion-datetime displayFormat="YYYY-MM-DD" pickerFormat="MMMM DD, YYYY" [(ngModel)]="issue.date_of_resolution"></ion-datetime>
    </ion-item>
    <ion-item *ngIf="did > 0 && _sharedService.role === 'admin'">
      <ion-label stacked>Notes</ion-label>
      <ion-input [(ngModel)]="issue.notes" type="text"></ion-input>
    </ion-item>
    <ion-item *ngIf="did > 0 && _sharedService.role === 'admin'">
      <ion-label stacked>Status</ion-label>
      <ion-select [(ngModel)]="issue.status">
        <ion-option value="pending">Pending</ion-option>
        <ion-option value="closed">Closed</ion-option>
        <ion-option value="deleted">Deleted</ion-option>
      </ion-select>
    </ion-item>

  </ion-list>

  <button (click)="save()" ion-button>Submit</button>

  <ion-list *ngIf="did > 0 && editImages.length">
    <ion-item *ngFor="let image of editImages">
      <button ion-button icon-only (click)="removeImage(image, 'edit')">
            <ion-icon name="close"></ion-icon>
          </button>
      <img src="{{image}}" style="width: 100%">
    </ion-item>
  </ion-list>

  <ion-list *ngIf="images.length">
    <ion-item *ngFor="let image of images">
      <button ion-button icon-only (click)="removeImage(image, 'new')">
            <ion-icon name="close"></ion-icon>
          </button>
      <img src="{{pathForImage(image)}}" style="width: 100%">
    </ion-item>
  </ion-list>

  <!--<img src="{{pathForImage(lastImage)}}" style="width: 100%">-->
</ion-content>


<ion-footer>
  <ion-toolbar color="primary">
    <ion-buttons>
      <button ion-button icon-left (click)="presentActionSheet()">
        <ion-icon name="camera"></ion-icon>Select Image
      </button>
      <!--<button ion-button icon-left (click)="uploadImage()" [disabled]="lastImage === null">
        <ion-icon name="cloud-upload"></ion-icon>Upload
      </button>-->
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
